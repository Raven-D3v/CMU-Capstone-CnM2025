{% extends "base.html" %}

{% block title %}Caller Details | OneTapSOS{% endblock %}

{% block content %}
<div class="p-6 space-y-6">
    <!-- Header -->
    <div class="flex flex-col md:flex-row md:justify-between md:items-start gap-3">
        <h2 class="text-2xl font-semibold text-gray-800 text-glow">
            {{ caller.full_name|default:"Full Name" }}
        </h2>
        <div class="text-left md:text-right">
            <p class="text-gray-600"><strong>[{{ caller.caller_id }} - CLIENT]</strong></p>
            <p class="text-gray-600">{{ caller.phone_number }}</p>
            <p class="text-gray-600">{{ caller.email }}</p>
        </div>
    </div>

    <!-- Search bar -->
    <div class="mb-6">
        <input type="text" placeholder="Search..." 
               class="w-full md:w-80 p-2 border border-gray-300 rounded-md 
                      focus:outline-none focus:ring-2 focus:ring-[#4B7289]">
    </div>

    <!-- Desktop Table -->
    <div class="hidden md:block overflow-x-auto">
        <table class="w-full border-collapse bg-white shadow-md rounded-lg overflow-hidden">
            <thead>
                <tr class="bg-gray-100">
                    <th class="p-3 border-b border-gray-300 text-left text-gray-800 font-semibold">Report ID</th>
                    <th class="p-3 border-b border-gray-300 text-left text-gray-800 font-semibold">Status</th>
                    <th class="p-3 border-b border-gray-300 text-left text-gray-800 font-semibold">Classification</th>
                    <th class="p-3 border-b border-gray-300 text-left text-gray-800 font-semibold">Location</th>
                    <th class="p-3 border-b border-gray-300 text-left text-gray-800 font-semibold">Time</th>
                    <th class="p-3 border-b border-gray-300 text-left text-gray-800 font-semibold">Date</th>
                    <th class="p-3 border-b border-gray-300 text-left text-gray-800 font-semibold">Message</th>
                </tr>
            </thead>
            <tbody>
                {% for report in reports %}
                <tr class="hover:bg-gray-50">
                    <td class="p-3 border-b">{{ report.report_id }}</td>
                    <td class="p-3 border-b">{{ report.status }}</td>
                    <td class="p-3 border-b">{{ report.crime_category }}</td>
                    <td class="p-3 border-b">{{ report.location }}</td>
                    <td class="p-3 border-b">{{ report.date_time_reported|time:"H:i" }}</td>
                    <td class="p-3 border-b">{{ report.date_time_reported|date:"M d, Y" }}</td>
                    <td class="p-3 border-b">{{ report.message }}</td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="7" class="p-3 border-b text-center text-gray-500">No reports found for this caller.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- Mobile Cards -->
    <div class="space-y-4 md:hidden">
        {% for report in reports %}
        <div class="bg-white shadow-md rounded-lg p-4 border border-gray-200">
            <p class="text-sm"><span class="font-semibold text-gray-700">Report ID:</span> {{ report.report_id }}</p>
            <p class="text-sm"><span class="font-semibold text-gray-700">Status:</span> {{ report.status }}</p>
            <p class="text-sm"><span class="font-semibold text-gray-700">Classification:</span> {{ report.crime_category }}</p>
            <p class="text-sm"><span class="font-semibold text-gray-700">Location:</span> {{ report.location }}</p>
            <p class="text-sm"><span class="font-semibold text-gray-700">Time:</span> {{ report.date_time_reported|time:"H:i" }}</p>
            <p class="text-sm"><span class="font-semibold text-gray-700">Date:</span> {{ report.date_time_reported|date:"M d, Y" }}</p>
            <p class="text-sm"><span class="font-semibold text-gray-700">Message:</span> {{ report.message }}</p>
        </div>
        {% empty %}
        <p class="text-gray-500">No reports found for this caller.</p>
        {% endfor %}
    </div>
</div>
{% endblock %}
